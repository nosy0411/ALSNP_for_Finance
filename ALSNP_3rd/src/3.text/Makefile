#----------------------------------------------------------------------------
# Prefix and Output target
#----------------------------------------------------------------------------

PREFIX_DIR	= ../..
OUT		= posix_regex pcre_regex

include $(PREFIX_DIR)/common_opt.mk

#----------------------------------------------------------------------------
# Default target.
#----------------------------------------------------------------------------
.PHONY: all clean dep
.IGNORE: pcre_regex pcre_regex.o

all: $(OUT)

#----------------------------------------------------------------------------
# Suffix rules
#----------------------------------------------------------------------------
include $(PREFIX_DIR)/common_rule.mk

#----------------------------------------------------------------------------
# Build binaries
#----------------------------------------------------------------------------
pcre_regex.c: posix_regex.c
	sed -e "s,regex\.h,pcre2posix\.h," $< > $@

pcre_regex: LDLIBS=-lpcre2-posix

#----------------------------------------------------------------------------
# others
#----------------------------------------------------------------------------
include $(PREFIX_DIR)/common_target.mk
